---
title: 5
last_updated: Dec 6, 2024
keywords: algorithm
sidebar: mydoc_sidebar
comments: true
permalink: 5.html

---

1st part

```js
const parts = `47|53
97|13
97|61
97|47
75|29
61|13
75|53
29|13
97|29
53|29
61|53
97|53
61|29
47|13
75|47
97|75
47|61
75|61
47|29
75|13
53|13

75,47,61,53,29
97,61,53,29,13
75,29,13
75,97,47,61,53
61,13,29
97,13,75,29,47`.split('\n\n');

const order = {};
const part1 = parts[0].split('\n').forEach(el => {
  const [before,after] = el.split('|');
  if(order[before]) order[before].after.push(after);
  else order[before] = {before: [], after: [after]};
  if(order[after]) order[after].before.push(before);
  else order[after] = {before: [before], after: []};
});

const part2 = parts[1].split('\n').map(el => el.split(','));

const correctIdx = [];
const incorrectIdx = [];


for(let i = 0; i < part2.length; i++) {
  let isCorrect = true;
  for(let j = 0; j < part2[i].length; j++) {
    const leftArr = part2[i].slice(0, j);
    const rightArr = part2[i].slice(j + 1);
    
    const mainNum = part2[i][j];
    if(!leftArr.every(el => order[mainNum].before.includes(el)) ||
    !rightArr.every(el => order[mainNum].after.includes(el)) || !order[mainNum]) {
      isCorrect = false;
      break;
    }
  }
  if(isCorrect) correctIdx.push(i);
  else incorrectIdx.push(i);
}

let ans = 0;

for(let i = 0; i < correctIdx.length; i++) {
  const midIdx = part2[correctIdx[i]][Math.floor(part2[correctIdx[i]].length / 2)];
  ans += parseInt(midIdx);
}

console.log(ans);
```

2nd part

```js
const parts = `47|53
97|13
97|61
97|47
75|29
61|13
75|53
29|13
97|29
53|29
61|53
97|53
61|29
47|13
75|47
97|75
47|61
75|61
47|29
75|13
53|13

75,47,61,53,29
97,61,53,29,13
75,29,13
75,97,47,61,53
61,13,29
97,13,75,29,47`.split('\n\n');

const order = {};
const part1 = parts[0].split('\n').forEach(el => {
  const [before,after] = el.split('|');
  if(order[before]) order[before].after.push(after);
  else order[before] = {before: [], after: [after]};
  if(order[after]) order[after].before.push(before);
  else order[after] = {before: [before], after: []};
});

const part2 = parts[1].split('\n').map(el => el.split(','));

const correctIdx = [];
const incorrectIdx = [];


for(let i = 0; i < part2.length; i++) {
  let isCorrect = true;
  for(let j = 0; j < part2[i].length; j++) {
    const leftArr = part2[i].slice(0, j);
    const rightArr = part2[i].slice(j + 1);
    
    const mainNum = part2[i][j];
    if(!leftArr.every(el => order[mainNum].before.includes(el)) ||
    !rightArr.every(el => order[mainNum].after.includes(el)) || !order[mainNum]) {
      isCorrect = false;
      break;
    }
  }
  if(isCorrect) correctIdx.push(i);
  else incorrectIdx.push(i);
}

let ans = 0;

for(let i = 0; i < correctIdx.length; i++) {
  const midIdx = part2[correctIdx[i]][Math.floor(part2[correctIdx[i]].length / 2)];
  ans += parseInt(midIdx);
}

console.log(ans);

const incorrectArrs = [];

for(let i = 0; i < incorrectIdx.length; i++) {
  const tempArr = [...part2[incorrectIdx[i]]];  
  const afterCount = {};

  for(const mainNum of tempArr) {
    afterCount[mainNum] = tempArr.reduce((acc, el) => order[mainNum].after.includes(el)? acc+1 : acc, 0);
  }

  console.log(afterCount);

  const tempArr2 = []

  for(const key of Object.keys(afterCount)) {
    tempArr2.push([key, afterCount[key]]);
  }
  incorrectArrs.push(tempArr2);
}

console.log(incorrectArrs);
const sortedArr = incorrectArrs.map(el => el.sort((a, b) => a[1] - b[1]));
console.log(sortedArr.map(el => el.map(el2 => el2[0]).join(',')));

ans = 0;

for(const incorrectArr of incorrectArrs) {
  const midIdx = incorrectArr[Math.floor(incorrectArr.length / 2)]
  ans += parseInt(midIdx);
}

console.log(ans);
```